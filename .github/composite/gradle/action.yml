# SPDX-FileCopyrightText: 2024 Linnea Gr√§f <nea@nea.moe>
#
# SPDX-License-Identifier: CC0-1.0

name: "Run Gradle on a filter=tree:0 checkout"
runs:
    using: composite
    steps:
        -   uses: actions/checkout@v5
            name: Checkout repository
            with:
                fetch-tags: true
                fetch-depth: 0
                filter: 'tree:0'
        -   name: Set up JDK 21
            uses: actions/setup-java@v5
            with:
                distribution: temurin
                java-version: 21
        -   name: Set up gradle cache
            uses: gradle/actions/setup-gradle@v4
            with:
                cache-read-only: false
                add-job-summary-as-pr-comment: 'on-failure'
                dependency-graph: 'generate-and-submit'
        -   name: Prepare unpacked Jars
            run: |
                ./gradlew unpackAllJars
            shell: sh
